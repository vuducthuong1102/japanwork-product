@using Manager.WebApp.Resources
@model Manager.WebApp.Models.ManageWarehouseModel

@{
    ViewBag.Title = ManagerResource.LB_DASHBOARD;

    var siteName = WebContext.GetSiteSettings().General.SiteName;
    if (string.IsNullOrEmpty(siteName))
    {
        siteName = "Admin";
    }
    //var hasStockPermission = PermissionHelper.CheckPermission("Index", "Warehouse");
    //var hasHistoryPermission = PermissionHelper.CheckPermission("History", "Warehouse");
}


@*@if (!hasHistoryPermission && !hasStockPermission)
    {

    }*@

<div class="m-alert m-alert--icon m-alert--air m-alert--square alert alert-success alert-dismissible fade show alway-show" role="alert" id="DashboardWelcome">
    <div class="m-alert__icon">
        <i class="la la-check"></i>
    </div>
    <div class="m-alert__text">
        @ManagerResource.LB_DASHBOARD_WELCOME_TO
        <strong>
            @siteName
        </strong>
        @ManagerResource.LB_DASHBOARD_WELCOME_SLOGAN
    </div>
    <div class="m-alert__close">
        <button type="button" class="close" data-dismiss="alert" aria-label="Close"></button>
    </div>
</div>

<div class="row">
    <div class="col-md-6" id="WeekStatisticsChart" style="display:none;">
        <div class="m-portlet" m-portlet="true" id="m_portlet_tools_1">
            <div class="m-portlet__head">
                <div class="m-portlet__head-caption">
                    <div class="m-portlet__head-title">
                        <h3 class="m-portlet__head-text">
                            <i class="ace-icon fa fa-signal"></i>
                            @ManagerResource.LB_STATISTICS_IN_WEEK 
                        </h3>
                    </div>
                </div>
            </div>
            <div class="m-portlet__body" style="height:400px">
                <canvas id="WeekStatisticsChartCanvas"></canvas>
                @*<progress id="animationProgress" max="1" value="0" style="width: 100%"></progress>*@
            </div>
        </div>
    </div>

    <div class="col-md-6" id="YearStatisticsChart" style="display:none;">
        <div class="m-portlet" m-portlet="true" id="m_portlet_tools_3">
            <div class="m-portlet__head">
                <div class="m-portlet__head-caption">
                    <div class="m-portlet__head-title">
                        <h3 class="m-portlet__head-text">
                            <i class="ace-icon fa fa-signal"></i>
                            @string.Format(ManagerResource.LB_STATISTICS_BY_YEAR_FORMAT, DateTime.Now.Year)
                        </h3>
                    </div>
                </div>

                @*<div class="m-portlet__head-tools">
                        <ul class="m-portlet__nav">
                            <li class="m-portlet__nav-item">
                                <a href="#" m-portlet-tool="reload" class="m-portlet__nav-link m-portlet__nav-link--icon">
                                    <i class="la la-refresh"></i>
                                </a>
                            </li>
                        </ul>
                    </div>*@
            </div>
            <div class="m-portlet__body" style="height:400px">
                <canvas id="canvas"></canvas>
            </div>
        </div>
    </div>
</div>

@section PagePluginStyles{
    <link href="~/Scripts/Plugins/Chart/Chart.min.css" rel="stylesheet" />
    <style>
        canvas {
            -moz-user-select: none;
            -webkit-user-select: none;
            -ms-user-select: none;
        }
    </style>
}

@section PageInlineScripts{
    <script src="~/Scripts/Plugins/Chart/Chart.min.js"></script>
    <script src="~/Scripts/Plugins/Chart/utils.js"></script>

    <script src="@Url.VersionedContent("~/Scripts/Home/dashboard.js")"></script>
}