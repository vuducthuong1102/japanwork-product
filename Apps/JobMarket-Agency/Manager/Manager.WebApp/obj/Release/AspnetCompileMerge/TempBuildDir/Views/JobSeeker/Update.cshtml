@using Manager.WebApp.Resources
@using Newtonsoft.Json;
@model Manager.WebApp.Models.JobSeekerUpdateProfileModel

@{
    var title = ManagerResource.LB_JOB_SEEKER_EDIT + ": " + Model.fullname;
    ViewBag.Title = title;

    var profileTkLink = SecurityHelper.GenerateSecureLink("JobSeeker", "MyProfilePartial", new { id = Model.job_seeker_id, exclude_ct_add = 0 });
    var eduTkLink = SecurityHelper.GenerateSecureLink("JobSeeker", "EduHistories", new { id = Model.job_seeker_id });
    var workTkLink = SecurityHelper.GenerateSecureLink("JobSeeker", "WorkHistories", new { id = Model.job_seeker_id });
    var cerTkLink = SecurityHelper.GenerateSecureLink("JobSeeker", "Certificates", new { id = Model.job_seeker_id });
}

@Html.Partial("_Notifications")

@Html.Partial("../Widgets/Modals/_LargeModal")
<!--begin::Portlet-->
<div class="m-portlet">
    <div class="m-portlet__head">
        <div class="m-portlet__head-caption">
            <div class="m-portlet__head-title">
                <h3 class="m-portlet__head-text">
                    <i class="fa fa-pencil-square-o fz-20 pl5"></i> @title
                </h3>
            </div>
        </div>
    </div>
    <!--begin::Form-->
    @using (Html.BeginForm("Create", "JobSeeker", FormMethod.Post, new { id = "frmProfile", enctype = "multipart/form-data", @class = "m-form m-form--fit", role = "form", @onkeydown = "return event.key !='Enter';" }))
    {
        @Html.AntiForgeryToken()
        @Html.HiddenFor(m => m.job_seeker_id)
        <input type="hidden" value="@profileTkLink" id="ProfileTk" />
        <input type="hidden" value="@eduTkLink" id="EduHistoryTk" />
        <input type="hidden" value="@workTkLink" id="WorkHistoryTk" />
        <input type="hidden" value="@cerTkLink" id="CertificateTk" />
        @Html.HiddenFor(s => s.next_step)
        @Html.HiddenFor(s => s.hide_pf)
        <div class="m-portlet__body">

            <!--begin::Section-->
            <div class="m-accordion m-accordion--default m-accordion--toggle-arrow" id="m_profile" role="tablist">
                <!--begin::Item-->
                <div class="m-accordion__item m-accordion__item--info">
                    <div class="m-accordion__item-head collapsed" role="tab" id="m_profile_head" data-toggle="collapse" href="#m_profile_body" aria-expanded="false">
                        <span class="m-accordion__item-icon">
                            <i class="la la-user"></i>
                        </span>
                        <span class="m-accordion__item-title">
                            @ManagerResource.LB_PROFILE
                        </span>
                        <span class="m-accordion__item-mode"></span>
                    </div>
                    <div class="m-accordion__item-body collapse @(Model.hide_pf == 0 ? "show" : "")" id="m_profile_body" role="tabpanel" aria-labelledby="m_profile_head" data-parent="#m_profile">
                        <div class="m-accordion__item-content">
                            <div id="MemberSubContainer">

                            </div>
                        </div>
                    </div>
                </div>
                <!--end::Item-->
            </div>
            <!--end::Section-->
            <!--begin::Section-->
            <div class="m-accordion m-accordion--default m-accordion--toggle-arrow" id="m_edu_history" role="tablist">
                <!--begin::Item-->
                <div class="m-accordion__item m-accordion__item--info">
                    <div class="m-accordion__item-head collapsed" role="tab" id="m_edu_history_head" data-toggle="collapse" href="#m_edu_history_body" aria-expanded="false">
                        <span class="m-accordion__item-icon">
                            <i class="la la-graduation-cap"></i>
                        </span>
                        <span class="m-accordion__item-title">
                            @ManagerResource.LB_EDUCATION_HISTORY
                        </span>
                        <span class="m-accordion__item-mode"></span>
                    </div>

                    <div class="m-accordion__item-body collapse show" id="m_edu_history_body" role="tabpanel" aria-labelledby="m_edu_history_head" data-parent="#m_edu_history">
                        <div class="m-accordion__item-content">
                            <div class="row">
                                <div class="col-lg-12 text-center">
                                    <a class="btn btn-sm btn-info" href="javascript:;" data-href="@Url.Action("UpdateEduHistory","JobSeeker", new { job_seeker_id = Model.job_seeker_id })" data-modal="" title=""><i class="la la-plus-circle"></i> @ManagerResource.LB_ADD_EDUCATION</a>
                                </div>
                            </div>
                            <div class="" id="EduHistories">

                            </div>
                        </div>
                    </div>
                </div>
                <!--end::Item-->
            </div>
            <!--end::Section-->
            <!--begin::Section-->
            <div class="m-accordion m-accordion--default m-accordion--toggle-arrow" id="m_work_history" role="tablist">
                <!--begin::Item-->
                <div class="m-accordion__item m-accordion__item--info">
                    <div class="m-accordion__item-head collapsed" role="tab" id="m_work_history_head" data-toggle="collapse" href="#m_work_history_body" aria-expanded="false">
                        <span class="m-accordion__item-icon">
                            <i class="la la-train"></i>
                        </span>
                        <span class="m-accordion__item-title">
                            @ManagerResource.LB_WORKING_EXPERIENCE
                        </span>
                        <span class="m-accordion__item-mode"></span>
                    </div>

                    <div class="m-accordion__item-body collapse show" id="m_work_history_body" role="tabpanel" aria-labelledby="m_work_history_head" data-parent="#m_work_history">
                        <div class="m-accordion__item-content">
                            <div class="row">
                                <div class="col-lg-12 text-center">
                                    <a class="btn btn-sm btn-info" href="javascript:;" data-href="@Url.Action("UpdateWorkHistory","JobSeeker", new { job_seeker_id = Model.job_seeker_id })" data-modal="" title=""><i class="la la-plus-circle"></i> @ManagerResource.LB_ADD_WORKING_EXPERIENCE</a>
                                </div>
                            </div>
                            <div class="" id="WorkHistories">

                            </div>
                        </div>
                    </div>
                </div>
                <!--end::Item-->
            </div>
            <!--end::Section-->
            <!--begin::Section-->
            <div class="m-accordion m-accordion--default m-accordion--toggle-arrow" id="m_certificate" role="tablist">
                <!--begin::Item-->
                <div class="m-accordion__item m-accordion__item--info">
                    <div class="m-accordion__item-head collapsed" role="tab" id="m_certificate_head" data-toggle="collapse" href="#m_certificate_body" aria-expanded="false">
                        <span class="m-accordion__item-icon">
                            <i class="la la-certificate"></i>
                        </span>
                        <span class="m-accordion__item-title">
                            @ManagerResource.LB_CERTIFICATE
                        </span>
                        <span class="m-accordion__item-mode"></span>
                    </div>

                    <div class="m-accordion__item-body collapse show" id="m_certificate_body" role="tabpanel" aria-labelledby="m_certificate_head" data-parent="#m_certificate">
                        <div class="m-accordion__item-content">
                            <div class="row">
                                <div class="col-lg-12 text-center">
                                    <a class="btn btn-sm btn-info" href="javascript:;" data-href="@Url.Action("UpdateCertificate","JobSeeker", new { job_seeker_id = Model.job_seeker_id })" data-modal="" title=""><i class="la la-plus-circle"></i> @ManagerResource.LB_ADD_CERTIFICATE</a>
                                </div>
                            </div>
                            <div class="" id="Certificates">

                            </div>
                        </div>
                    </div>
                </div>
                <!--end::Item-->
            </div>
            <!--end::Section-->

            <div class="row" id="">
                <div class="col-lg-12 col-md-12 col-sm-12" style="height:80px">
                    <a class="btn btn-outline-info btn-back btn-sm" href="@Url.Action("Index", "JobSeeker",new { type_job_seeker = 1})"><i class="fa fa-backward"></i> @ManagerResource.LB_GOBACK</a>

                    @*<div class="form-group m-form__group hidden" id="btnControls" style="margin-bottom: 40px;">
                            <div class="col-lg-12 col-md-12 col-sm-12">
                                <button type="submit" class="btn btn-outline-info pull-right btn-sm">
                                    <i class="fa fa-floppy-o"></i> @ManagerResource.LB_SAVE
                                </button>
                            </div>
                        </div>*@
                    <button type="submit" class="btn btn-outline-info pull-right btn-sm">
                        <i class="fa fa-floppy-o"></i> @ManagerResource.LB_SAVE
                    </button>
                </div>
            </div>
        </div>
    }
    <!--end::Form-->
</div>
<!--end::Portlet-->

@section PagePluginStyles
{
    <link href="@Url.VersionedContent("~/Content/Page/JobSeeker/main.css")" rel="stylesheet" />
}

@section PageInlineStyles{
    <style>
        .repeater-item {
            border: 1px solid #ccc;
            border-radius: 5px;
            padding: 10px;
        }
    </style>
}

@section PagePluginScripts
 {
    <script src="@Url.VersionedContent("~/Scripts/JobSeeker/update.js")"></script>
    <script>
        $(function () {
            showItemLoading("#MemberSubContainer");
            setTimeout(function () {
                var url_tk = $("#ProfileTk").val();
                $('#MemberSubContainer').load(url_tk, function (response, status, xhr) {
                    hideItemLoading("#MemberSubContainer");
                    $("#btnControls").removeClass("hidden");
                });
            }, 300);

        });
    </script>

}
@section PageInlineScripts{
    <script>
        setInterval(function () {
            if ($("#next_step").val() == "1" && $("#m_profile").height() > 2000) {
                $(window).scrollTop($("#m_profile").height() + 100);
                $("#next_step").val(0);
            }
        }, 500)
    </script>
}
