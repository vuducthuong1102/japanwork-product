@using Manager.WebApp.Resources
@using Manager.WebApp.Caching;
@using Manager.SharedLibs;
@model Manager.WebApp.Models.ManageCompanyModel
@{
    var currentLang = UserCookieManager.GetCurrentLanguageOrDefault();
}

<div class="form-group m-form__group row">
    <div class="col-md-7">
        <input type="hidden" class="title-search" value="@ManagerResource.PH_SEARCH_COMPANY" />
        <select class="form-control m-select2-search select-industry" name="@Html.NameFor(m=>m.sub_industry_id)" data-size="7">
            <option value="0">@ManagerResource.LB_SELECT__SUB_INDUSTRY</option>
            @if (Model.Industries.HasData())
            {
                foreach (var industry in Model.Industries)
                {
                    if (industry.Sub_industries.HasData())
                    {
                        var industryName = industry.LangList.Where(x => x.language_code == currentLang).Select(x => x.industry).FirstOrDefault();
                        if (string.IsNullOrEmpty(industryName))
                        {
                            industryName = industry.industry;
                        }

                        <optgroup label="@industryName">
                            @foreach (var sub in industry.Sub_industries)
                            {
                                var subName = sub.LangList.Where(x => x.language_code == currentLang).Select(x => x.sub_industry).FirstOrDefault();
                                if (string.IsNullOrEmpty(subName))
                                {
                                    subName = sub.sub_industry;
                                }
                                <option value="@sub.id" @(Model.sub_industry_id == sub.id ? "selected" : "")>
                                    @subName
                                </option>
                            }
                        </optgroup>
                    }
                }
            }
        </select>
    </div>

    <div class="col-md-5">
        @if (Model.Staffs.HasData())
        {
            <select id="@Html.IdFor(m => m.staff_id)" name="@Html.NameFor(m => m.staff_id)" data-live-search="true" class="filter-search form-control selectpicker-search m-input m-input--square">
                <option value="0">@ManagerResource.LB_SELECT_PIC</option>
                @foreach (var item in Model.Staffs)
                {
                    <option value="@item.StaffId" @(Model.staff_id == item.StaffId ? "selected" : "")>
                        @item.FullName
                    </option>
                }
            </select>
        }
    </div>
</div>
<div class="form-group row">
    <div class="col-md-7">
        <select class="form-control m-select2-search select-field" name="prefecture_id" data-size="7">
            <option value="0">@ManagerResource.LB_SELECT_PREFECTURE</option>
            @if (Model.Regions.HasData())
            {
                foreach (var item in Model.Regions)
                {
                    if (item.Prefectures.HasData())
                    {
                        var regionName = item.furigana;
                        if (currentLang == "ja-JP")
                        {
                            regionName = item.region;
                        }
                        <optgroup label="@regionName">
                            @foreach (var subItem in item.Prefectures)
                            {
                                var prefectureName = subItem.furigana;
                                if (currentLang == "ja-JP")
                                {
                                    prefectureName = subItem.prefecture;
                                }
                                <option value="@subItem.id" @(Model.prefecture_id == subItem.id ? "selected" : "")>
                                    @prefectureName
                                </option>
                            }
                        </optgroup>
                    }
                }
            }
        </select>
    </div>
    <div class="col-md-5">
        <div class="m-checkbox-inline filter-check">
            <label class="m-checkbox">
                <input type="checkbox" @(Model.ishiring ? "checked" : string.Empty) name="@Html.NameFor(m=>m.ishiring)" value="true">
                @ManagerResource.LB_IS_HIRING
                <span></span>
            </label>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-md-12">
        <button type="submit" class="btn btn-info float-right btn-sm">
            <i class="fa fa-search"></i> @ManagerResource.LB_SEARCH
        </button>
        <button type="button" class="btn btn-warning float-left btn-sm mr-3 reset-btn">
            <i class="fa fa-eraser"></i> @ManagerResource.BT_CLEAR
        </button>
    </div>
</div>