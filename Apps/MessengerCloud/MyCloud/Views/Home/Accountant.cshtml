<button id="btnCheck" type="button">Checking</button>

@section scripts{
    <script src="~/Scripts/jquery.signalR-2.2.2.min.js"></script>
    <script src="http://localhost:3636/signalr/hubs/"></script>
    <script type="text/javascript">
        var userInfo = {
            user_name: "bangvl",
            UserId: "1",
            Avatar: ""
        };

        $(function () {
            // Declare a proxy to reference the hub.
            var commonGateHub = $.connection.messengerHub;

            $("#btnCheck").click(function () {
                commonGateHub.server.sendMessageToAll("admin", "test");
            });

            $.connection.hub.url = "http://localhost:3636/signalr/hubs/";
            $.connection.hub.start().done(function () {
                console.log('Connected to MyCloud server successfully');
                commonGateHub.server.connect(userInfo);

            }).fail(function (error) {
                console.log("Cannot connect to MyCloud server because: " + error);
            });

            //Register all client methods
            registerClientMethods(commonGateHub);
        });

        //function registerEvents(commonGateHub) {
        //    commonGateHub.server.connect(userInfo);

        //    //$("#btnCheck").click(function () {
        //    //    commonGateHub.server.sendMessage();
        //    //});
        //}

        function registerClientMethods(commonGateHub) {
            commonGateHub.client.messageReceived = function (userName, message) {
                console.log(123);
                alert(6456);
            };

            // Calls when user successfully logged in
            commonGateHub.client.onConnected = function (connectionId) {
                console.log("Your current ConnectionId: " + connectionId);
            }

            // On New User Connected
            commonGateHub.client.onNewUserConnected = function (id, name) {
                console.log(name + " connected to MyCloud. ConnectionId: " + id);
            }

            // On User Disconnected
            commonGateHub.client.onUserDisconnected = function (id, userName) {

            }

            // On New User Connected
            commonGateHub.client.updateNotification = function () {
                alert('Received new notification. Press F5 now');
            }

        }
    </script>
}